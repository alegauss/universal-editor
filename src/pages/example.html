<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="urn:adobe:aue:system:namespace" content="aue" />
    <title>Editable Page</title>

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        line-height: 1.6;
        color: #333;
      }

      header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 60px 20px;
        text-align: center;
      }

      h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
      }

      article {
        max-width: 800px;
        margin: 40px auto;
        padding: 0 20px;
      }

      article p {
        margin-bottom: 15px;
        font-size: 1.1rem;
      }

      img {
        width: 100%;
        height: auto;
        border-radius: 8px;
        margin: 20px 0;
      }

      /* Styles for edit mode */
      html.aue-edit-mode [data-aue-resource] {
        outline: 2px dashed #3498db;
        outline-offset: 4px;
        cursor: pointer;
        position: relative;
        transition: outline 0.2s;
      }

      html.aue-edit-mode [data-aue-resource]:hover {
        outline: 2px solid #e67e22;
        outline-offset: 4px;
      }

      html.aue-edit-mode [data-aue-resource]:hover::before {
        content: attr(data-aue-label);
        position: absolute;
        top: -25px;
        left: 0;
        background: #e67e22;
        color: white;
        padding: 4px 8px;
        font-size: 11px;
        border-radius: 3px;
        white-space: nowrap;
        z-index: 1000;
        pointer-events: none;
      }

      /* Styles for ProseMirror when active */
      .ProseMirror {
        outline: 2px solid #27ae60 !important;
        outline-offset: 4px !important;
        padding: 10px !important;
        min-height: 100px !important;
        background: white !important;
        cursor: text !important;
        position: relative !important;
        z-index: 100 !important;
      }

      .ProseMirror:focus {
        outline: 3px solid #2ecc71 !important;
        box-shadow: 0 0 0 3px rgba(46, 204, 113, 0.1) !important;
      }

      /* Remove outline from elements when ProseMirror is active */
      .ProseMirror * {
        outline: none !important;
      }

      /* Styles for paragraphs inside ProseMirror */
      .ProseMirror p {
        margin-bottom: 1em;
      }

      .ProseMirror ul,
      .ProseMirror ol {
        padding-left: 2em;
        margin-bottom: 1em;
      }

      .ProseMirror li {
        margin-bottom: 0.5em;
      }

      .ProseMirror strong {
        font-weight: bold;
      }

      .ProseMirror em {
        font-style: italic;
      }
    </style>
    
    <script type="application/vnd.adobe.aue.models+json">
      {
        "component-models": {
          "text": {
            "fields": [
              { "name": "jcr:title", "type": "text" },
              { "name": "text", "type": "richtext" }
            ]
          },
          "media": {
            "fields": [
              { "name": "fileReference", "type": "media" },
              { "name": "alt", "type": "text" }
            ]
          }
        }
      }
    </script>
  </head>
  <body>
    <main
      data-aue-resource="jcr:content/root"
      data-aue-type="container"
      data-aue-label="Main Content"
    >
      <header>
        <h1
          data-aue-resource="jcr:content/root/title"
          data-aue-type="text"
          data-aue-prop="jcr:title"
          data-aue-label="Page Title"
        >
          üé® Welcome to Universal Editor
        </h1>
      </header>

      <article
        data-aue-resource="jcr:content/root/content"
        data-aue-type="richtext"
        data-aue-prop="text"
        data-aue-label="Article Content"
      >
        <p>
          This is <strong>editable content</strong> that can be modified
          through the Universal Editor.
        </p>
        <p>
          To edit, click the <strong>"‚úèÔ∏è Edit"</strong> button in the top bar
          and then click on any highlighted element.
        </p>
        <p>
          You can edit:
        </p>
        <ul>
          <li>Titles and simple text</li>
          <li>Rich content with formatting</li>
          <li>Images and media</li>
          <li>Reusable components</li>
        </ul>
      </article>

      <img
        data-aue-resource="jcr:content/root/image"
        data-aue-type="media"
        data-aue-prop="fileReference"
        data-aue-label="Featured Image"
        src="https://picsum.photos/id/1/800/400"
        alt="Featured image"
      />
    </main>

    <!-- Universal Editor (original) - LOADS FIRST -->
    <script type="module" src="../universal-editor.ts"></script>
    
    <!-- Editor Bridge (our adapter) - LOADS AFTER -->
    <script type="module" src="../editor/editor-bridge.ts"></script>
  </body>
</html>